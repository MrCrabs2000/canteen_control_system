# Быстрые команды с примерами:
- **Достать из бд всё:** session.query(User).all()
- **Достать из бд что-то одно по фильтру:** 
session.query(Dish).filter(Dish.name == 'суп').first()
- **Добавить в ассоциацию:** menu.dishes.append(dish)
- **Удалить из ассоциации:** dish.products.remove(product)
- **Удалить просто:** session.delete(user)
- **Изменение данных:** user.balance += 500
- **Сохранить:** session.commit()
- **Отменить:** session.rollback()

# Список ассоциаций: #
Под ассоциациями подрозумеваются таблицы, работающие по системе **Many to many**

Таблицы с ассоциациями:
- Dish
- Product
- Menu

# Инициализация бд для работы с ней:

- from db_session import init_database, create_session - импорт
- init_database() - Инициализация самой бд
- session = create_session() - Создание сессии
- не забудь: **session.close()** после работы

# Более подробно о командах:

## Создание объекта класса с указанием его атрибутов:
```text
new_user = User(
    name="Анна", 
    login="anna", 
    password="pass123",
    role="student"
)
session.add(new_user)
session.commit()
```

## Работа с many to many:
```text
- Создаем продукты и блюдо
potato = Product(name="Картофель", amount=50)
carrot = Product(name="Морковь", amount=30)
soup = Dish(name="Овощной суп", amount=10)

- Связываем: блюдо <- продукты
soup.products.append(potato)
soup.products.append(carrot)
session.commit()

- Читаем связи
for product in soup.products:
    print(product.name)

- Конкретно здесь читается название, но можно считывать что угодно

- Для удаления, например: указываем блюдо, выбираем атрибут - products и как из списка удаляем:

dish.products.remove(product)

- Можно удалить всё сразу:

menu.dishes.clear()

```

## Примеры поиска по бд:

```text
# Получить всех пользователей
all_users = session.query(User).all()

# Найти по логину
user = session.query(User).filter_by(login="ivan_petrov").first()

# Найти по роли - студент
students = session.query(User).filter_by(role="student").all()

# Получить пользователя по ID
user = session.query(User).get(1)

# Получить информацию о студенте
student_info = session.query(Info).filter_by(user_id=user.id).first()
```


## Примеры обновления данных в бд:

```text
Получаем из бд объект:
product = session.query(Product).filter_by(name="Куриное филе").first()
По выбранному атрибуту изменяем данные:
product.name = 'картофель' - новое имя
product.amount += 5 - увеличение колличества на 5
```